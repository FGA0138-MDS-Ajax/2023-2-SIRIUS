// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider = "postgresql"
    url      = env("DATABASE_URL")
}

model User {
    id       Int     @id @default(autoincrement())
    email    String  @unique
    name     String?
    password String
}

model Torneio {
    id          String   @id @unique @default(uuid())
    datatorneio DateTime @default(now())
    vencedor    String[]
    rodada      Rodada[]
}

model Rodada {
    id            String          @id @default(uuid())
    torneio       Torneio         @relation(fields: [torneioId], references: [id])
    torneioId     String
    grupo         Grupo[]
}

model Grupo {
    id                         String                       @id @default(uuid())
    rodada                     Rodada                       @relation(fields: [idRodada], references: [id])
    idRodada                   String
    participante               Participante[]
    ParticipanteParticipaGrupo ParticipanteParticipaGrupo[]
}

model ParticipanteParticipaGrupo {
    id             String       @id @default(uuid())
    participante   Participante @relation(fields: [participanteId], references: [id])
    participanteId String
    grupo          Grupo        @relation(fields: [grupoId], references: [id])
    grupoId        String
}

model Participante {
    id                         String                       @id @default(uuid())
    teamName                   String
    inGameName                 String
    checkedInAt                String
    idDiscord                  String
    winner                     Boolean                      @default(false)
    email                      String
    grupo                      Grupo                        @relation(fields: [grupoId], references: [id])
    grupoId                    String
    ParticipanteParticipaGrupo ParticipanteParticipaGrupo[]
}
