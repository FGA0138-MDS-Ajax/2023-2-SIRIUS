// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider = "postgresql"
    url      = env("DATABASE_URL")
}

enum EnumVencedorPosicao {
    PRIMEIRO
    SEGUNDO
    TERCEIRO
    QUARTO
}

model User {
    id       Int     @id @default(autoincrement())
    email    String  @unique
    name     String?
    password String
}

model Torneio {
    id          String     @id @unique @default(uuid())
    nome        String
    dataTorneio DateTime   @default(now())
    rodada      Rodada[]
    vencedor    Vencedor[]
}

model Rodada {
    id        String  @id @default(uuid())
    torneio   Torneio @relation(fields: [torneioID], references: [id])
    torneioID String
    grupo     Grupo[]
}

model Grupo {
    id                  String                @id @default(uuid())
    rodada              Rodada                @relation(fields: [rodadaID], references: [id])
    rodadaID            String
    participante        Participante[]
    participanteEmGrupo ParticipanteEmGrupo[]
}

model ParticipanteEmGrupo {
    id             String       @id @default(uuid())
    participante   Participante @relation(fields: [participanteID], references: [id])
    participanteID String
    grupo          Grupo        @relation(fields: [grupoID], references: [id])
    grupoID        String
}

model Participante {
    id                  String                @id @default(uuid())
    teamName            String
    inGameName          String
    checkedInAt         String
    dicordID            String
    winner              Boolean               @default(false)
    email               String
    grupo               Grupo                 @relation(fields: [grupoID], references: [id])
    grupoID             String
    participanteEmGrupo ParticipanteEmGrupo[]
    vencedor            Vencedor[]
}

model Vencedor {
    id             String              @id @default(uuid())
    participante   Participante        @relation(fields: [participanteID], references: [id])
    participanteID String
    torneio        Torneio             @relation(fields: [torneioID], references: [id])
    torneioID      String
    posicao        EnumVencedorPosicao
}
